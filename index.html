<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vocarchive</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

/* ================= BASE ================= */

body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #070c15;
  color: #e8f1ff;
}

/* ================= HEADER ================= */

.site-header {
  background: linear-gradient(180deg,#050b14,#0b1324);
  border-bottom: 1px solid rgba(0,200,255,.15);
  position: sticky;
  top: 0;
  z-index: 999;
}

.header-container {
  display: flex;
  justify-content: center;
  padding: 12px;
}

.site-logo {
  height: 60px;
  transition: .2s;
}

.site-logo:hover {
  transform: scale(1.05);
  filter: drop-shadow(0 0 12px rgba(0,200,255,.5));
}

/* ================= SEARCH ================= */

.search-bar {
  max-width: 1200px;
  margin: 20px auto;
  padding: 0 12px;
}

.search-bar input {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: none;
  outline: none;
  background: #10182c;
  color: #fff;
}

/* ================= FILTER PANEL ================= */

.filter-panel {
  max-width: 1200px;
  margin: auto;
  padding: 0 12px;
}

.filter-group {
  background: #0c1426;
  border-radius: 10px;
  margin-bottom: 10px;
  overflow: hidden;
}

.filter-header {
  padding: 12px;
  font-weight: bold;
  cursor: pointer;
  background: #111b35;
}

.filter-body {
  display: none;
  padding: 10px;
  flex-wrap: wrap;
  gap: 6px;
}

.filter-group.open .filter-body {
  display: flex;
}

.filter-btn {
  padding: 6px 10px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background: #1a2645;
  color: #bfe3ff;
  font-size: 12px;
}

.filter-btn.active {
  background: #00bfff;
  color: #000;
}

/* ================= GRID ================= */

.grid {
  max-width: 1200px;
  margin: 20px auto;
  padding: 0 12px;
  display: grid;
  grid-template-columns: repeat(auto-fill,minmax(260px,1fr));
  gap: 16px;
}

/* ================= CARD ================= */

.card {
  background: #0e162c;
  border-radius: 14px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.card-top {
  position: relative;
}

.card-top img {
  width: 100%;
  height: 180px;
  object-fit: cover;
}

/* PLAY BUTTON */

.play-btn {
  position: absolute;
  bottom: 10px;
  right: 10px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  background: #00bfff;
  font-size: 16px;
  cursor: pointer;
}

.card-content {
  padding: 12px;
}

.tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 8px;
}

.tag {
  background: #1a2645;
  padding: 4px 8px;
  border-radius: 8px;
  font-size: 11px;
}

/* ================= PAGINATION ================= */

.pagination {
  display: flex;
  justify-content: center;
  gap: 8px;
  padding: 20px;
}

.page-btn {
  padding: 8px 12px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background: #1a2645;
  color: #fff;
}

.page-btn.active {
  background: #00bfff;
  color: #000;
}

/* ================= MOBILE ================= */

@media(max-width:768px){

  .grid {
    grid-template-columns: 1fr;
  }

}

</style>
</head>

<body>

<!-- HEADER -->

<header class="site-header">
  <div class="header-container">
    <img src="https://github.com/vocarchiver/Vocarchive/blob/main/assets/img/vocarchive-logo.png?raw=true"
         class="site-logo">
  </div>
</header>

<!-- SEARCH -->

<div class="search-bar">
  <input type="text" id="searchInput" placeholder="Search voicebanks...">
</div>

<!-- FILTERS -->

<div class="filter-panel">

<div class="filter-group" data-category="gender">
<div class="filter-header">Gender Tags</div>
<div class="filter-body"></div>
</div>

<div class="filter-group" data-category="officialLang">
<div class="filter-header">Language (Official)</div>
<div class="filter-body"></div>
</div>

<div class="filter-group" data-category="extraLang">
<div class="filter-header">Additional Languages</div>
<div class="filter-body"></div>
</div>

<div class="filter-group" data-category="status">
<div class="filter-header">Status</div>
<div class="filter-body"></div>
</div>

<div class="filter-group" data-category="availability">
<div class="filter-header">Availability</div>
<div class="filter-body"></div>
</div>

<div class="filter-group" data-category="type">
<div class="filter-header">Type of Voicebank</div>
<div class="filter-body"></div>
</div>

<div class="filter-group" data-category="engine">
<div class="filter-header">Engine</div>
<div class="filter-body"></div>
</div>

</div>

<!-- GRID -->

<div class="grid" id="grid"></div>

<!-- PAGINATION -->

<div class="pagination" id="pagination"></div>

<script>

/* ================= CONFIG ================= */

const ITEMS_PER_PAGE = 12;

const searchInput = document.getElementById("searchInput");
const grid = document.getElementById("grid");
const pagination = document.getElementById("pagination");

let voicebanks = [];
let currentPage = 1;

let categoryFilters = {
  gender: [],
  officialLang: [],
  extraLang: [],
  status: [],
  availability: [],
  type: [],
  engine: []
};

/* ================= DEMO DATA ================= */
/* Reemplaza esto con tu fetch real */

voicebanks = [
{
 name:"Solaria",
 image:"https://i.imgur.com/NbZ9ZRu.jpg",
 demo:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",
 tags:["Female","EN","AI","Active","Paid","SynthV"],
 releaseDate:"2021-05-20"
},
{
 name:"Daren",
 image:"https://i.imgur.com/NbZ9ZRu.jpg",
 demo:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",
 tags:["Male","ES","CV","Free","Beta","UTAU"],
 releaseDate:"2019-08-10"
}
];

/* ================= FILTER RENDER ================= */

function renderFilters(){

 const map = {
  gender:new Set(),
  officialLang:new Set(),
  extraLang:new Set(),
  status:new Set(),
  availability:new Set(),
  type:new Set(),
  engine:new Set()
 };

 voicebanks.forEach(v=>{
  v.tags.forEach(t=>{
    const x=t.toLowerCase();

    if(["male","female"].includes(x)) map.gender.add(t);
    else if(["jp","en","es"].includes(x)) map.officialLang.add(t);
    else if(["kr","fr"].includes(x)) map.extraLang.add(t);
    else if(["active","beta","discontinued"].includes(x)) map.status.add(t);
    else if(["free","paid"].includes(x)) map.availability.add(t);
    else if(["cv","ai"].includes(x)) map.type.add(t);
    else map.engine.add(t);
  });
 });

 document.querySelectorAll(".filter-group").forEach(g=>{
  const cat=g.dataset.category;
  const body=g.querySelector(".filter-body");

  body.innerHTML=[...map[cat]].map(t=>`
   <button class="filter-btn ${categoryFilters[cat].includes(t)?"active":""}"
   onclick="toggleCategoryFilter('${cat}','${t}')">${t}</button>
  `).join("");
 });

}

/* ================= FILTER TOGGLE ================= */

function toggleCategoryFilter(cat,val){

 const arr=categoryFilters[cat];

 if(arr.includes(val)){
  categoryFilters[cat]=arr.filter(v=>v!==val);
 } else {
  arr.push(val);
 }

 currentPage=1;
 update();
}

/* ================= UPDATE ================= */

function update(){

 const s=searchInput.value.toLowerCase();

 const filtered=voicebanks.filter(v=>{

  const searchMatch=v.name.toLowerCase().includes(s);

  const catMatch=
   Object.values(categoryFilters)
   .every(arr=>arr.every(t=>v.tags.includes(t)));

  return searchMatch && catMatch;

 });

 // ===== SORT BY RELEASE DATE =====

 filtered.sort((a,b)=>{
  return new Date(b.releaseDate||"1900-01-01") -
         new Date(a.releaseDate||"1900-01-01");
 });

 renderCards(filtered);
 renderFilters();
 renderPagination(filtered.length);

}

/* ================= CARDS ================= */

function renderCards(data){

 grid.innerHTML="";

 const start=(currentPage-1)*ITEMS_PER_PAGE;
 const slice=data.slice(start,start+ITEMS_PER_PAGE);

 slice.forEach(v=>{

 grid.innerHTML+=`

 <div class="card">

  <div class="card-top">
    <img src="${v.image}">
    <button class="play-btn" onclick="playDemo('${v.demo}')">â–¶</button>
  </div>

  <div class="card-content">
    <b>${v.name}</b>
    <div class="tags">
      ${v.tags.map(t=>`<div class="tag">${t}</div>`).join("")}
    </div>
  </div>

 </div>

 `;
 });

}

/* ================= AUDIO ================= */

let audio=new Audio();

function playDemo(src){
 audio.src=src;
 audio.play();
}

/* ================= PAGINATION ================= */

function renderPagination(total){

 pagination.innerHTML="";
 const pages=Math.ceil(total/ITEMS_PER_PAGE);

 for(let i=1;i<=pages;i++){

 pagination.innerHTML+=`
 <button class="page-btn ${i===currentPage?"active":""}"
 onclick="currentPage=${i};update()">${i}</button>
 `;

 }

}

/* ================= ACCORDION ================= */

document.addEventListener("click",e=>{
 if(e.target.classList.contains("filter-header")){
  e.target.parentElement.classList.toggle("open");
 }
});

/* ================= INIT ================= */

searchInput.addEventListener("input",()=>{currentPage=1;update();});

update();

</script>

</body>
</html>
